<html>
    <head>
        <script src="https://unpkg.com/vue@next"></script>
        <link rel="stylesheet" href="css/global.css">
        <link rel="stylesheet" href="css/message_editor.css">
    </head>
    <body style="padding: 20px;">
        <div id="app">
            <message-editor v-on:send_message="onMessageSend($event)"></message-editor>
        </div>
        <script>
            const messageEditor = {
                name: "message-editor",
                data: () => ({
                    content: ""
                }),
                methods: {
                    clear() {
                        this.content = "";
                    }
                },
                emits: ["send_message"],
                template: `
                <div class='message_editor_wrapper'>
                <textarea v-model="content" class="message_editor_input" />
                <button @click="$emit('send_message', content);" class="message_editor_button"><div class="message_editor_send_icon"></div></button>
                </div>`
            };
            const app = Vue.createApp({
                name: "app",
                methods: {
                    onMessageSend(msg) {
                        // TODO: implement something that calls the api and send the message
                        console.log(msg);
                        // TODO somehow call message-editor's clear methof if message was sent correctly
                    }
                },
            });
            app.component("message-editor", messageEditor);
            app.mount("#app");
        </script>
    </body>
</html>