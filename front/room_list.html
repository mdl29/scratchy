<html>
    <head>
        <script src="https://unpkg.com/vue@next"></script>
        <link rel="stylesheet" href="css/global.css">
        <link rel="stylesheet" href="css/room_list.css">
    </head>
    <body>
        <div id="app">
            <room-list v-model:rooms="rooms" v-on:room-selected="displayRoom($event)"></room-list>
        </div>
        <script>
            rooms = [
                {
                    "_id": {
                        "$oid": "6071ac5176e5bd456a859d9d"
                    },
                    "description": "ma description",
                    "title": "Room 1",
                    "user": []
                },
                {
                    "_id": {
                        "$oid": "6071ac5176e5bd456a859d9d"
                    },
                    "description": "ma description",
                    "title": "Room 2",
                    "user": []
                },
                {
                    "_id": {
                        "$oid": "6071ac5176e5bd456a859d9d"
                    },
                    "description": "ma description",
                    "title": "Room 3",
                    "user": []
                }
            ];
            const roomList = {
                name: "room-list",
                props: ["rooms"],
                emits: ["roomSelected"],
                template: `
                <div class='room_list_wrapper'>
		    <template v-for="room in rooms" :key="room._id.$oid">
                        <div class="room_list_item" @click="$emit('roomSelected', room)">
                            {{room.title}}
                        </div>
		    </template>
                </div>`
            };
            const app = Vue.createApp({
                data: () => ({
                    rooms: rooms
                }),
                name: "app",
                methods: {
                    displayRoom(room) {
                        // TODO: do whatever
                        console.log(`selected ${room.title}`, room);
                    }
                },
            });
            app.component("room-list", roomList);
            app.mount("#app");
        </script>
    </body>
</html>
